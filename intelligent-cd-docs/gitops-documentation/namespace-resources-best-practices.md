KUBERNETES/OPENSHIFT NAMESPACE - RESOURCE MANAGEMENT BEST PRACTICES

TARGET RESOURCE TYPES (FOCUS ONLY ON THESE 4):
1. Deployments - Application workload definitions
2. ConfigMaps - Configuration data storage
3. Services - Network service definitions
4. Routes - External access configuration (OpenShift-specific)

YAML CLEANING AND SANITIZATION FOR APPLICATION RESOURCES:

METADATA TO REMOVE WHEN CLEANING YAMLS:
- namespace: Target namespace (use the namespace specified by user)
- resourceVersion: Cluster-specific version identifier
- uid: Unique identifier assigned by Kubernetes
- creationTimestamp: When the resource was created
- generation: Internal versioning counter
- managedFields: Field management information
- selfLink: Deprecated API link
- finalizers: (usually safe to remove for redeployment)
- ownerReferences: (remove if creating standalone resources)

SECTIONS TO COMPLETELY REMOVE:
- status: ENTIRE status section must be removed (runtime information)
- spec.template.metadata.creationTimestamp: Remove from pod templates

ANNOTATIONS TO REMOVE WHEN CLEANING YAMLS:
- kubectl.kubernetes.io/last-applied-configuration: Auto-generated kubectl annotation
- argocd.argoproj.io/*: All ArgoCD-specific annotations (sync-wave, tracking-id, etc.)
- deployment.kubernetes.io/revision: Deployment revision number
- Any other system-generated annotations that start with kubernetes.io/ or openshift.io/

METADATA TO PRESERVE:
- name: Resource name
- labels: Custom labels and selectors
- annotations: Custom annotations (except system-generated ones)

ESSENTIAL LABELS TO ADD FOR APPLICATION RESOURCES:
- app.kubernetes.io/name: application-name (or specific component name)
- app.kubernetes.io/instance: application-instance
- app.kubernetes.io/version: Application version
- app.kubernetes.io/component: api|frontend|database|cache
- app.kubernetes.io/part-of: application-system
- app.kubernetes.io/managed-by: openshift

DEPLOYMENT-SPECIFIC CLEANING:
- Remove spec.template.metadata.creationTimestamp
- Remove spec.template.metadata.labels that are system-generated
- *MANDATORY*: Preserve spec.selector.matchLabels (critical for pod selection)
- *MANDATORY*: Preserve spec.template.spec.containers configuration

CONFIGMAP-SPECIFIC CLEANING:
- Preserve all data and binaryData sections
- Clean only metadata section
- Ensure proper key naming conventions
- When processing deployments, automatically identify ConfigMaps referenced in:
    * spec.template.spec.containers[].envFrom[].configMapRef.name
    * spec.template.spec.volumes[].configMap.name
- Always retrieve and clean ConfigMaps that are referenced by deployments

SERVICE-SPECIFIC CLEANING:
- Preserve spec.selector (critical for pod targeting)
- Preserve spec.ports configuration
- Remove spec.clusterIP and spec.clusterIPs (auto-assigned)
- Keep spec.type if explicitly set
- Remove entire status section (including loadBalancer status)

ROUTE-SPECIFIC CLEANING (OpenShift):
- Remove spec.host (cluster-specific hostname, auto-generated by OpenShift)
- Preserve spec.to.name (backend service reference)
- Remove entire status section (including status.ingress)
- Preserve spec.tls configuration if present
- Remove system-generated annotations like openshift.io/host.generated

YAML OUTPUT FORMAT REQUIREMENTS:
- Use standard Kubernetes multi-document YAML format
- Separate each resource with '---' on its own line
- Start with '---' before the first resource
- End with '---' after the last resource
- This format allows direct use with 'oc apply -f filename.yaml'
- Example format:
    ---
    apiVersion: apps/v1
    kind: Deployment
    ...
    ---
    apiVersion: v1
    kind: Service
    ...
    ---
